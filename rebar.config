{deps, [
  % grisp,
  {grisp, {git, "https://github.com/GrispLasp/grisp.git", {branch, "master"}}},
  {lager, {git, "https://github.com/erlang-lager/lager.git", {branch, "master"}}},
  {epmd, {git, "https://github.com/erlang/epmd", {ref, "4d1a59"}}},
  {partisan, {git, "https://github.com/lasp-lang/partisan.git", {branch, "master"}}}
]}.

{plugins, [
    % {rebar3_hex, "4.1.0"},
    rebar3_hex,
    {rebar3_grisp, {git, "https://github.com/grisp/rebar3_grisp.git", {branch, "master"}}}
    % {rebar3_grisp, "1.2.3"}
    % {rebar3_auto, {git, "https://github.com/xuchaoqian/rebar3_auto.git", {branch, "master"}}}
]}.

{erl_opts, [debug_info,
            {parse_transform, lager_transform}]}.

{grisp, [
    {deploy, [
      % {pre_script, "rm -rf /Volumes/GRISP/*"},
      % {destination, "/Volumes/GRISP"},
      % {post_script, "diskutil unmount /Volumes/GRISP"}
      {pre_script, "rm -rf /media/laymer/GRISP/*"},
      {destination, "/media/laymer/GRISP"},
      {post_script, "umount /media/laymer/GRISP"}
    ]},
    {otp, [
        {version, "21.0"}
    ]},
    {build, [
        {toolchain, [
          % {directory,"/Users/Laymer/GRiSP/grisp-software/rtems-install/rtems/5"} % Mac
          {directory,"/home/laymer/NewGRiSP/grisp-software/rtems-install/rtems/5"} % Desktop
          % {directory,"/home/laymer/EdgeComputing/NewGRiSP/grisp-software/rtems-install/rtems/5"} % W540
        ]}
    ]}
]}.

{profiles, [
    {test, [
        % {deps, [
        %     {concuerror, {git, "https://github.com/parapluu/Concuerror.git", {branch, "master"}}}
        % ]},
        {relx, [
            {release, {ballgame, "0.1.0"}, [
                sasl,
                lager,
                {epmd, none},
                partisan,
                ballgame
            ]},
            {sys_config, "config/test.config"},
            {extended_start_script, true}
        ]},
        {sys_config, "config/test.config"},
        {dev_mode, true},
        {include_erts, false},
        {shell, [{apps, []},
            {config, "config/test.config"}]},
        {erl_opts,
            [nowarn_export_all,
            {d, 'SHELL', true},
            debug_info]
        }]
    },
    {prod, [

        {erl_opts, [
            {d, 'SILENT'}
        ]}

    ]}]
}.

{shell, [{apps, []},
        {config, "config/sys.config"}]}.

{relx, [
    {release, {ballgame, "0.1.0"}, [
        sasl,
        lager,
        {epmd, none},
        partisan,
        ballgame
    ]},
    {sys_config, "config/sys.config"},
    {extended_start_script, true}
]}.
